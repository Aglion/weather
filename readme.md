# Проект 2

## Описание
Это веб-сервис на Flask, который помогает предсказать плохую погоду на маршруте между двумя городами.
Я использую AccuWeather API, чтобы получить данные о погоде и потом проверяю, подходят ли условия для приятной поездки или нет.

**Как запустить:**

**1. Клонируем репозиторий:**
    ```bash
    git clone https://github.com/your-username/weather.git
    cd weather
    ```

**2. Устанавливаем зависимости:**
    ```bash
    Python3 -m pip install python-dotenv
    Python3 -m pip install Flask
    ```

**3. Настраиваем переменные окружения:**
    ```bash
    weather_token=ВАШ_API_КЛЮЧ
    ```
    (Файл `.env`, где хранится ваш API-ключ)

**4. Запускаем:**
    ```bash
    python app.py
    ```
    - Откройте [http://127.0.0.1:5000](http://127.0.0.1:5000) в браузере.


## Примеры запросов к API

Ниже несколько примеров того, как приложение под капотом получает данные о погоде у AccuWeather. Вам не нужно делать эти запросы вручную — всё выполняется автоматически при вводе городов на сайте.

1. **Поиск города по названию:**

   Пример: пользователь вводит «Москва». Приложение отправляет запрос:  
   `http://dataservice.accuweather.com/locations/v1/cities/search?apikey=ВАШ_API_КЛЮЧ&q=Москва&language=ru-ru`

   В ответ AccuWeather возвращает список найденных городов с их уникальным ключом (Key). Этот ключ нужен, чтобы узнать погоду для конкретного места.


2. **Получение текущей погоды:**

   После того, как мы узнали ключ для «Москва» (например, `294021`), приложение делает запрос:  
   `http://dataservice.accuweather.com/currentconditions/v1/294021?apikey=ВАШ_API_КЛЮЧ&language=ru-ru&details=true`

   В ответ приходит информация: температура, влажность, скорость ветра, описание погоды. Приложение берёт эти данные, чтобы показать их пользователю.


3. **Прогноз на ближайший час (вероятность осадков):**

   Чтобы узнать, пойдёт ли дождь или снег в ближайший час, приложение отправляет запрос:  
   `http://dataservice.accuweather.com/forecasts/v1/hourly/1hour/294021?apikey=ВАШ_API_КЛЮЧ&language=ru-ru&details=true`

   В ответ приходит вероятность осадков в процентах. Приложение использует это число, чтобы определить, плохая погода или нет.

Все эти запросы происходят автоматически, когда вы вводите города. Если что-то пойдёт не так (например, город не найден), приложение покажет понятное сообщение об ошибке.



## Описание возможных ошибок и их обработки

1. **Некорректный ввод города**  
   Пример: пользователь ввёл несуществующий или очень странный город.
   Результат: приложение не может получить ключ локации и выводит сообщение: Не удалось найти город. Проверьте правильность написания.


2. **Пустые поля ввода**  
   Пример: пользователь нажал кнопку без заполнения формы.
   Результат: приложение проверяет, что оба поля не пустые. Если одно или оба поля пусты, выводится сообщение: Вы не ввели название города.


3. **Некорректный API-ключ или проблемы с конфигурацией**  
   Пример: отсутствует или неверно указан ключ в `.env`.
   Результат: приложение не сможет выполнить запросы к API. Нужно проверить наличие корректного `weather_token` в `.env` и повторить попытку.

